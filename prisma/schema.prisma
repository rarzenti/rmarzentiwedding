// Prisma schema for wedding guest management
// Using Vercel Postgres

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum RsvpStatus {
  PENDING
  YES
  NO
}

model Group {
  id        String   @id @default(cuid())
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  guests    Guest[]
}

model Guest {
  id             String     @id @default(cuid())
  firstName      String
  lastName       String
  title          String?    // Honorific like "Mr.", "Ms.", "Mrs.", etc.
  email          String?
  phone          String?
  tableNumber    Int?
  rsvpStatus     RsvpStatus @default(PENDING)
  foodSelection  String?
  notesToCouple  String?
  songRequests   String?
  groupId        String?
  group          Group?     @relation(fields: [groupId], references: [id])
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  isChild        Boolean    @default(false)
}

model Table {
  id       String  @id @default(cuid())
  number   Int     @unique
  nickname String?
}
